"use strict";

/**
 * Functions used in configuration forms and on user preferences pages
 */
var configInlineParams;
var configScriptLoaded;
/**
 * checks whether browser supports web storage
 *
 * @param type the type of storage i.e. localStorage or sessionStorage
 *
 * @returns bool
 */

function isStorageSupported(type, warn) {
  try {
    window[type].setItem('PMATest', 'test'); // Check whether key-value pair was set successfully

    if (window[type].getItem('PMATest') === 'test') {
      // Supported, remove test variable from storage
      window[type].removeItem('PMATest');
      return true;
    }
  } catch (error) {
    // Not supported
    if (warn) {
      Functions.ajaxShowMessage(Messages.strNoLocalStorage, false);
    }
  }

  return false;
}
/**
 * Unbind all event handlers before tearing down a page
 */


AJAX.registerTeardown('config.js', function () {
  $('.optbox input[id], .optbox select[id], .optbox textarea[id]').off('change').off('keyup');
  $('.optbox input[type=button][name=submit_reset]').off('click');
  $('div.tabs_contents').off();
  $('#import_local_storage, #export_local_storage').off('click');
  $('form.prefs-form').off('change').off('submit');
  $(document).off('click', 'div.click-hide-message');
  $('#prefs_autoload').find('a').off('click');
});
AJAX.registerOnload('config.js', function () {
  var $topmenuUpt = $('#user_prefs_tabs');
  $topmenuUpt.find('a.active').attr('rel', 'samepage');
  $topmenuUpt.find('a:not(.active)').attr('rel', 'newpage');
}); // default values for fields

var defaultValues = {};
/**
 * Returns field type
 *
 * @param {Element} field
 */

function getFieldType(field) {
  var $field = $(field);
  var tagName = $field.prop('tagName');

  if (tagName === 'INPUT') {
    return $field.attr('type');
  } else if (tagName === 'SELECT') {
    return 'select';
  } else if (tagName === 'TEXTAREA') {
    return 'text';
  }

  return '';
}
/**
 * Enables or disables the "restore default value" button
 *
 * @param {Element} field
 * @param {boolean} display
 */


function setRestoreDefaultBtn(field, display) {
  var $el = $(field).closest('td').find('.restore-default img');
  $el[display ? 'show' : 'hide']();
}
/**
 * Marks field depending on its value (system default or custom)
 *
 * @param {Element} field
 */


function markField(field) {
  var $field = $(field);
  var type = getFieldType($field);
  var isDefault = checkFieldDefault($field, type); // checkboxes uses parent <span> for marking

  var $fieldMarker = type === 'checkbox' ? $field.parent() : $field;
  setRestoreDefaultBtn($field, !isDefault);
  $fieldMarker[isDefault ? 'removeClass' : 'addClass']('custom');
}
/**
 * Sets field value
 *
 * value must be of type:
 * o undefined (omitted) - restore default value (form default, not PMA default)
 * o String - if field_type is 'text'
 * o boolean - if field_type is 'checkbox'
 * o Array of values - if field_type is 'select'
 *
 * @param {Element} field
 * @param {String}  fieldType  see {@link #getFieldType}
 * @param {String|Boolean}  value
 */


function setFieldValue(field, fieldType, value) {
  var $field = $(field);

  switch (fieldType) {
    case 'text':
    case 'number':
      $field.val(value);
      break;

    case 'checkbox':
      $field.prop('checked', value);
      break;

    case 'select':
      var options = $field.prop('options');
      var i;
      var imax = options.length;

      for (i = 0; i < imax; i++) {
        options[i].selected = value.indexOf(options[i].value) !== -1;
      }

      break;
  }

  markField($field);
}
/**
 * Gets field value
 *
 * Will return one of:
 * o String - if type is 'text'
 * o boolean - if type is 'checkbox'
 * o Array of values - if type is 'select'
 *
 * @param {Element} field
 * @param {String}  fieldType returned by {@link #getFieldType}
 * @type Boolean|String|String[]
 */


function getFieldValue(field, fieldType) {
  var $field = $(field);

  switch (fieldType) {
    case 'text':
    case 'number':
      return $field.prop('value');

    case 'checkbox':
      return $field.prop('checked');

    case 'select':
      var options = $field.prop('options');
      var i;
      var imax = options.length;
      var items = [];

      for (i = 0; i < imax; i++) {
        if (options[i].selected) {
          items.push(options[i].value);
        }
      }

      return items;
  }

  return null;
}
/**
 * Returns values for all fields in fieldsets
 */
// eslint-disable-next-line no-unused-vars


function getAllValues() {
  var $elements = $('fieldset input, fieldset select, fieldset textarea');
  var values = {};
  var type;
  var value;

  for (var i = 0; i < $elements.length; i++) {
    type = getFieldType($elements[i]);
    value = getFieldValue($elements[i], type);

    if (typeof value !== 'undefined') {
      // we only have single selects, fatten array
      if (type === 'select') {
        value = value[0];
      }

      values[$elements[i].name] = value;
    }
  }

  return values;
}
/**
 * Checks whether field has its default value
 *
 * @param {Element} field
 * @param {String}  type
 * @return boolean
 */


function checkFieldDefault(field, type) {
  var $field = $(field);
  var fieldId = $field.attr('id');

  if (typeof defaultValues[fieldId] === 'undefined') {
    return true;
  }

  var isDefault = true;
  var currentValue = getFieldValue($field, type);

  if (type !== 'select') {
    isDefault = currentValue === defaultValues[fieldId];
  } else {
    // compare arrays, will work for our representation of select values
    if (currentValue.length !== defaultValues[fieldId].length) {
      isDefault = false;
    } else {
      for (var i = 0; i < currentValue.length; i++) {
        if (currentValue[i] !== defaultValues[fieldId][i]) {
          isDefault = false;
          break;
        }
      }
    }
  }

  return isDefault;
}
/**
 * Returns element's id prefix
 * @param {Element} element
 */
// eslint-disable-next-line no-unused-vars


function getIdPrefix(element) {
  return $(element).attr('id').replace(/[^-]+$/, '');
} // ------------------------------------------------------------------
// Form validation and field operations
//
// form validator assignments


var validate = {}; // form validator list

var validators = {
  // regexp: numeric value
  regExpNumeric: /^[0-9]+$/,
  // regexp: extract parts from PCRE expression
  regExpPcreExtract: /(.)(.*)\1(.*)?/,

  /**
   * Validates positive number
   *
   * @param {boolean} isKeyUp
   */
  validatePositiveNumber: function validatePositiveNumber(isKeyUp) {
    if (isKeyUp && this.value === '') {
      return true;
    }

    var result = this.value !== '0' && validators.regExpNumeric.test(this.value);
    return result ? true : Messages.error_nan_p;
  },

  /**
   * Validates non-negative number
   *
   * @param {boolean} isKeyUp
   */
  validateNonNegativeNumber: function validateNonNegativeNumber(isKeyUp) {
    if (isKeyUp && this.value === '') {
      return true;
    }

    var result = validators.regExpNumeric.test(this.value);
    return result ? true : Messages.error_nan_nneg;
  },

  /**
   * Validates port number
   */
  validatePortNumber: function validatePortNumber() {
    if (this.value === '') {
      return true;
    }

    var result = validators.regExpNumeric.test(this.value) && this.value !== '0';
    return result && this.value <= 65535 ? true : Messages.error_incorrect_port;
  },

  /**
   * Validates value according to given regular expression
   *
   * @param {boolean} isKeyUp
   * @param {string}  regexp
   */
  validateByRegex: function validateByRegex(isKeyUp, regexp) {
    if (isKeyUp && this.value === '') {
      return true;
    } // convert PCRE regexp


    var parts = regexp.match(validators.regExpPcreExtract);
    var valid = this.value.match(new RegExp(parts[2], parts[3])) !== null;
    return valid ? true : Messages.error_invalid_value;
  },

  /**
   * Validates upper bound for numeric inputs
   *
   * @param {boolean} isKeyUp
   * @param {int} maxValue
   */
  validateUpperBound: function validateUpperBound(isKeyUp, maxValue) {
    var val = parseInt(this.value, 10);

    if (isNaN(val)) {
      return true;
    }

    return val <= maxValue ? true : Functions.sprintf(Messages.error_value_lte, maxValue);
  },
  // field validators
  field: {},
  // fieldset validators
  fieldset: {}
};
/**
 * Registers validator for given field
 *
 * @param {String}  id       field id
 * @param {String}  type     validator (key in validators object)
 * @param {boolean} onKeyUp  whether fire on key up
 * @param {Array}   params   validation function parameters
 */
// eslint-disable-next-line no-unused-vars

function registerFieldValidator(id, type, onKeyUp, params) {
  if (typeof validators[type] === 'undefined') {
    return;
  }

  if (typeof validate[id] === 'undefined') {
    validate[id] = [];
  }

  if (validate[id].length === 0) {
    validate[id].push([type, params, onKeyUp]);
  }
}
/**
 * Returns validation functions associated with form field
 *
 * @param {String}  fieldId     form field id
 * @param {boolean} onKeyUpOnly  see registerFieldValidator
 * @type Array
 * @return array of [function, parameters to be passed to function]
 */


function getFieldValidators(fieldId, onKeyUpOnly) {
  // look for field bound validator
  var name = fieldId && fieldId.match(/[^-]+$/)[0];

  if (typeof validators.field[name] !== 'undefined') {
    return [[validators.field[name], null]];
  } // look for registered validators


  var functions = [];

  if (typeof validate[fieldId] !== 'undefined') {
    // validate[field_id]: array of [type, params, onKeyUp]
    for (var i = 0, imax = validate[fieldId].length; i < imax; i++) {
      if (onKeyUpOnly && !validate[fieldId][i][2]) {
        continue;
      }

      functions.push([validators[validate[fieldId][i][0]], validate[fieldId][i][1]]);
    }
  }

  return functions;
}
/**
 * Displays errors for given form fields
 *
 * WARNING: created DOM elements must be identical with the ones made by
 * PhpMyAdmin\Config\FormDisplayTemplate::displayInput()!
 *
 * @param {Object} errorList list of errors in the form {field id: error array}
 */


function displayErrors(errorList) {
  var tempIsEmpty = function tempIsEmpty(item) {
    return item !== '';
  };

  for (var fieldId in errorList) {
    var errors = errorList[fieldId];
    var $field = $('#' + fieldId);
    var isFieldset = $field.attr('tagName') === 'FIELDSET';
    var $errorCnt;

    if (isFieldset) {
      $errorCnt = $field.find('dl.errors');
    } else {
      $errorCnt = $field.siblings('.inline_errors');
    } // remove empty errors (used to clear error list)


    errors = $.grep(errors, tempIsEmpty); // CSS error class

    if (!isFieldset) {
      // checkboxes uses parent <span> for marking
      var $fieldMarker = $field.attr('type') === 'checkbox' ? $field.parent() : $field;
      $fieldMarker[errors.length ? 'addClass' : 'removeClass']('field-error');
    }

    if (errors.length) {
      // if error container doesn't exist, create it
      if ($errorCnt.length === 0) {
        if (isFieldset) {
          $errorCnt = $('<dl class="errors"></dl>');
          $field.find('table').before($errorCnt);
        } else {
          $errorCnt = $('<dl class="inline_errors"></dl>');
          $field.closest('td').append($errorCnt);
        }
      }

      var html = '';

      for (var i = 0, imax = errors.length; i < imax; i++) {
        html += '<dd>' + errors[i] + '</dd>';
      }

      $errorCnt.html(html);
    } else if ($errorCnt !== null) {
      // remove useless error container
      $errorCnt.remove();
    }
  }
}
/**
 * Validates fields and fieldsets and call displayError function as required
 */


function setDisplayError() {
  var elements = $('.optbox input[id], .optbox select[id], .optbox textarea[id]'); // run all field validators

  var errors = {};

  for (var i = 0; i < elements.length; i++) {
    validateField(elements[i], false, errors);
  } // run all fieldset validators


  $('fieldset.optbox').each(function () {
    validateFieldset(this, false, errors);
  });
  displayErrors(errors);
}
/**
 * Validates fieldset and puts errors in 'errors' object
 *
 * @param {Element} fieldset
 * @param {boolean} isKeyUp
 * @param {Object}  errors
 */


function validateFieldset(fieldset, isKeyUp, errors) {
  var $fieldset = $(fieldset);

  if ($fieldset.length && typeof validators.fieldset[$fieldset.attr('id')] !== 'undefined') {
    var fieldsetErrors = validators.fieldset[$fieldset.attr('id')].apply($fieldset[0], [isKeyUp]);

    for (var fieldId in fieldsetErrors) {
      if (typeof errors[fieldId] === 'undefined') {
        errors[fieldId] = [];
      }

      if (typeof fieldsetErrors[fieldId] === 'string') {
        fieldsetErrors[fieldId] = [fieldsetErrors[fieldId]];
      }

      $.merge(errors[fieldId], fieldsetErrors[fieldId]);
    }
  }
}
/**
 * Validates form field and puts errors in 'errors' object
 *
 * @param {Element} field
 * @param {boolean} isKeyUp
 * @param {Object}  errors
 */


function validateField(field, isKeyUp, errors) {
  var args;
  var result;
  var $field = $(field);
  var fieldId = $field.attr('id');
  errors[fieldId] = [];
  var functions = getFieldValidators(fieldId, isKeyUp);

  for (var i = 0; i < functions.length; i++) {
    if (typeof functions[i][1] !== 'undefined' && functions[i][1] !== null) {
      args = functions[i][1].slice(0);
    } else {
      args = [];
    }

    args.unshift(isKeyUp);
    result = functions[i][0].apply($field[0], args);

    if (result !== true) {
      if (typeof result === 'string') {
        result = [result];
      }

      $.merge(errors[fieldId], result);
    }
  }
}
/**
 * Validates form field and parent fieldset
 *
 * @param {Element} field
 * @param {boolean} isKeyUp
 */


function validateFieldAndFieldset(field, isKeyUp) {
  var $field = $(field);
  var errors = {};
  validateField($field, isKeyUp, errors);
  validateFieldset($field.closest('fieldset.optbox'), isKeyUp, errors);
  displayErrors(errors);
}

function loadInlineConfig() {
  if (!Array.isArray(configInlineParams)) {
    return;
  }

  for (var i = 0; i < configInlineParams.length; ++i) {
    if (typeof configInlineParams[i] === 'function') {
      configInlineParams[i]();
    }
  }
}

function setupValidation() {
  validate = {};
  configScriptLoaded = true;

  if (configScriptLoaded && typeof configInlineParams !== 'undefined') {
    loadInlineConfig();
  } // register validators and mark custom values


  var $elements = $('.optbox input[id], .optbox select[id], .optbox textarea[id]');
  $elements.each(function () {
    markField(this);
    var $el = $(this);
    $el.on('change', function () {
      validateFieldAndFieldset(this, false);
      markField(this);
    });
    var tagName = $el.attr('tagName'); // text fields can be validated after each change

    if (tagName === 'INPUT' && $el.attr('type') === 'text') {
      $el.on('keyup', function () {
        validateFieldAndFieldset($el, true);
        markField($el);
      });
    } // disable textarea spellcheck


    if (tagName === 'TEXTAREA') {
      $el.attr('spellcheck', false);
    }
  }); // check whether we've refreshed a page and browser remembered modified
  // form values

  var $checkPageRefresh = $('#check_page_refresh');

  if ($checkPageRefresh.length === 0 || $checkPageRefresh.val() === '1') {
    // run all field validators
    var errors = {};

    for (var i = 0; i < $elements.length; i++) {
      validateField($elements[i], false, errors);
    } // run all fieldset validators


    $('fieldset.optbox').each(function () {
      validateFieldset(this, false, errors);
    });
    displayErrors(errors);
  } else if ($checkPageRefresh) {
    $checkPageRefresh.val('1');
  }
}

AJAX.registerOnload('config.js', function () {
  setupValidation();
}); //
// END: Form validation and field operations
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// Tabbed forms
//

/**
 * Sets active tab
 *
 * @param {String} tabId
 */

function setTab(tabId) {
  $('ul.tabs').each(function () {
    var $this = $(this);

    if (!$this.find('li a[href="#' + tabId + '"]').length) {
      return;
    }

    $this.find('li').removeClass('active').find('a[href="#' + tabId + '"]').parent().addClass('active');
    $this.parent().find('div.tabs_contents fieldset').hide().filter('#' + tabId).show();
    var hashValue = 'tab_' + tabId;
    location.hash = hashValue;
    $this.parent().find('input[name=tab_hash]').val(hashValue);
  });
}

function setupConfigTabs() {
  var forms = $('form.config-form');
  forms.each(function () {
    var $this = $(this);
    var $tabs = $this.find('ul.tabs');

    if (!$tabs.length) {
      return;
    } // add tabs events and activate one tab (the first one or indicated by location hash)


    $tabs.find('li').removeClass('active');
    $tabs.find('a').on('click', function (e) {
      e.preventDefault();
      setTab($(this).attr('href').substr(1));
    }).first().parent().addClass('active');
    $this.find('div.tabs_contents fieldset').hide().first().show();
  });
}

function adjustPrefsNotification() {
  var $prefsAutoLoad = $('#prefs_autoload');
  var $tableNameControl = $('#table_name_col_no');
  var $prefsAutoShowing = $prefsAutoLoad.css('display') !== 'none';

  if ($prefsAutoShowing && $tableNameControl.length) {
    $tableNameControl.css('top', '55px');
  }
}

AJAX.registerOnload('config.js', function () {
  setupConfigTabs();
  adjustPrefsNotification(); // tab links handling
  // (works with history in FF, further browser support here would be an overkill)

  window.onhashchange = function () {
    if (location.hash.match(/^#tab_[a-zA-Z0-9_]+$/)) {
      // session ID is sometimes appended here
      var hash = location.hash.substr(5).split('&')[0];

      if ($('#' + hash).length) {
        setTab(hash);
      }
    }
  };

  window.onhashchange();
}); //
// END: Tabbed forms
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// Form reset buttons
//

AJAX.registerOnload('config.js', function () {
  $('.optbox input[type=button][name=submit_reset]').on('click', function () {
    var fields = $(this).closest('fieldset').find('input, select, textarea');

    for (var i = 0, imax = fields.length; i < imax; i++) {
      setFieldValue(fields[i], getFieldType(fields[i]), defaultValues[fields[i].id]);
    }

    setDisplayError();
  });
}); //
// END: Form reset buttons
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// "Restore default" and "set value" buttons
//

/**
 * Restores field's default value
 *
 * @param {String} fieldId
 */

function restoreField(fieldId) {
  var $field = $('#' + fieldId);

  if ($field.length === 0 || defaultValues[fieldId] === undefined) {
    return;
  }

  setFieldValue($field, getFieldType($field), defaultValues[fieldId]);
}

function setupRestoreField() {
  $('div.tabs_contents').on('mouseenter', '.restore-default, .set-value', function () {
    $(this).css('opacity', 1);
  }).on('mouseleave', '.restore-default, .set-value', function () {
    $(this).css('opacity', 0.25);
  }).on('click', '.restore-default, .set-value', function (e) {
    e.preventDefault();
    var href = $(this).attr('href');
    var fieldSel;

    if ($(this).hasClass('restore-default')) {
      fieldSel = href;
      restoreField(fieldSel.substr(1));
    } else {
      fieldSel = href.match(/^[^=]+/)[0];
      var value = href.match(/=(.+)$/)[1];
      setFieldValue($(fieldSel), 'text', value);
    }

    $(fieldSel).trigger('change');
  }).find('.restore-default, .set-value') // inline-block for IE so opacity inheritance works
  .css({
    display: 'inline-block',
    opacity: 0.25
  });
}

AJAX.registerOnload('config.js', function () {
  setupRestoreField();
}); //
// END: "Restore default" and "set value" buttons
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// User preferences import/export
//

AJAX.registerOnload('config.js', function () {
  offerPrefsAutoimport();
  var $radios = $('#import_local_storage, #export_local_storage');

  if (!$radios.length) {
    return;
  } // enable JavaScript dependent fields


  $radios.prop('disabled', false).add('#export_text_file, #import_text_file').on('click', function () {
    var enableId = $(this).attr('id');
    var disableId;

    if (enableId.match(/local_storage$/)) {
      disableId = enableId.replace(/local_storage$/, 'text_file');
    } else {
      disableId = enableId.replace(/text_file$/, 'local_storage');
    }

    $('#opts_' + disableId).addClass('disabled').find('input').prop('disabled', true);
    $('#opts_' + enableId).removeClass('disabled').find('input').prop('disabled', false);
  }); // detect localStorage state

  var lsSupported = isStorageSupported('localStorage', true);
  var lsExists = lsSupported ? window.localStorage.config || false : false;
  $('div.localStorage-' + (lsSupported ? 'un' : '') + 'supported').hide();
  $('div.localStorage-' + (lsExists ? 'empty' : 'exists')).hide();

  if (lsExists) {
    updatePrefsDate();
  }

  $('form.prefs-form').on('change', function () {
    var $form = $(this);
    var disabled = false;

    if (!lsSupported) {
      disabled = $form.find('input[type=radio][value$=local_storage]').prop('checked');
    } else if (!lsExists && $form.attr('name') === 'prefs_import' && $('#import_local_storage')[0].checked) {
      disabled = true;
    }

    $form.find('input[type=submit]').prop('disabled', disabled);
  }).on('submit', function (e) {
    var $form = $(this);

    if ($form.attr('name') === 'prefs_export' && $('#export_local_storage')[0].checked) {
      e.preventDefault(); // use AJAX to read JSON settings and save them

      savePrefsToLocalStorage($form);
    } else if ($form.attr('name') === 'prefs_import' && $('#import_local_storage')[0].checked) {
      // set 'json' input and submit form
      $form.find('input[name=json]').val(window.localStorage.config);
    }
  });
  $(document).on('click', 'div.click-hide-message', function () {
    $(this).hide().parent('.card-body').css('height', '').next('form').show();
  });
});
/**
 * Saves user preferences to localStorage
 *
 * @param {Element} form
 */

function savePrefsToLocalStorage(form) {
  var $form = $(form);
  var submit = $form.find('input[type=submit]');
  submit.prop('disabled', true);
  $.ajax({
    url: 'index.php?route=/preferences/manage',
    cache: false,
    type: 'POST',
    data: {
      'ajax_request': true,
      'server': CommonParams.get('server'),
      'submit_get_json': true
    },
    success: function success(data) {
      if (typeof data !== 'undefined' && data.success === true) {
        window.localStorage.config = data.prefs;
        window.localStorage.configMtime = data.mtime;
        window.localStorage.configMtimeLocal = new Date().toUTCString();
        updatePrefsDate();
        $('div.localStorage-empty').hide();
        $('div.localStorage-exists').show();
        var group = $form.parent('.card-body');
        group.css('height', group.height() + 'px');
        $form.hide('fast');
        $form.prev('.click-hide-message').show('fast');
      } else {
        Functions.ajaxShowMessage(data.error);
      }
    },
    complete: function complete() {
      submit.prop('disabled', false);
    }
  });
}
/**
 * Updates preferences timestamp in Import form
 */


function updatePrefsDate() {
  var d = new Date(window.localStorage.configMtimeLocal);
  var msg = Messages.strSavedOn.replace('@DATE@', Functions.formatDateTime(d));
  $('#opts_import_local_storage').find('div.localStorage-exists').html(msg);
}
/**
 * Prepares message which informs that localStorage preferences are available and can be imported or deleted
 */


function offerPrefsAutoimport() {
  var hasConfig = isStorageSupported('localStorage') && (window.localStorage.config || false);
  var $cnt = $('#prefs_autoload');

  if (!$cnt.length || !hasConfig) {
    return;
  }

  $cnt.find('a').on('click', function (e) {
    e.preventDefault();
    var $a = $(this);

    if ($a.attr('href') === '#no') {
      $cnt.remove();
      $.post('index.php', {
        'server': CommonParams.get('server'),
        'prefs_autoload': 'hide'
      }, null, 'html');
      return;
    } else if ($a.attr('href') === '#delete') {
      $cnt.remove();
      localStorage.clear();
      $.post('index.php', {
        'server': CommonParams.get('server'),
        'prefs_autoload': 'hide'
      }, null, 'html');
      return;
    }

    $cnt.find('input[name=json]').val(window.localStorage.config);
    $cnt.find('form').trigger('submit');
  });
  $cnt.show();
}           20210823123856-8l0|a  "use strict";

/**
 * Functions used in configuration forms and on user preferences pages
 */
var configInlineParams;
var configScriptLoaded;
/**
 * checks whether browser supports web storage
 *
 * @param type the type of storage i.e. localStorage or sessionStorage
 *
 * @returns bool
 */

function isStorageSupported(type, warn) {
  try {
    window[type].setItem('PMATest', 'test'); // Check whether key-value pair was set successfully

    if (window[type].getItem('PMATest') === 'test') {
      // Supported, remove test variable from storage
      window[type].removeItem('PMATest');
      return true;
    }
  } catch (error) {
    // Not supported
    if (warn) {
      Functions.ajaxShowMessage(Messages.strNoLocalStorage, false);
    }
  }

  return false;
}
/**
 * Unbind all event handlers before tearing down a page
 */


AJAX.registerTeardown('config.js', function () {
  $('.optbox input[id], .optbox select[id], .optbox textarea[id]').off('change').off('keyup');
  $('.optbox input[type=button][name=submit_reset]').off('click');
  $('div.tabs_contents').off();
  $('#import_local_storage, #export_local_storage').off('click');
  $('form.prefs-form').off('change').off('submit');
  $(document).off('click', 'div.click-hide-message');
  $('#prefs_autoload').find('a').off('click');
});
AJAX.registerOnload('config.js', function () {
  var $topmenuUpt = $('#user_prefs_tabs');
  $topmenuUpt.find('a.active').attr('rel', 'samepage');
  $topmenuUpt.find('a:not(.active)').attr('rel', 'newpage');
}); // default values for fields

var defaultValues = {};
/**
 * Returns field type
 *
 * @param {Element} field
 */

function getFieldType(field) {
  var $field = $(field);
  var tagName = $field.prop('tagName');

  if (tagName === 'INPUT') {
    return $field.attr('type');
  } else if (tagName === 'SELECT') {
    return 'select';
  } else if (tagName === 'TEXTAREA') {
    return 'text';
  }

  return '';
}
/**
 * Enables or disables the "restore default value" button
 *
 * @param {Element} field
 * @param {boolean} display
 */


function setRestoreDefaultBtn(field, display) {
  var $el = $(field).closest('td').find('.restore-default img');
  $el[display ? 'show' : 'hide']();
}
/**
 * Marks field depending on its value (system default or custom)
 *
 * @param {Element} field
 */


function markField(field) {
  var $field = $(field);
  var type = getFieldType($field);
  var isDefault = checkFieldDefault($field, type); // checkboxes uses parent <span> for marking

  var $fieldMarker = type === 'checkbox' ? $field.parent() : $field;
  setRestoreDefaultBtn($field, !isDefault);
  $fieldMarker[isDefault ? 'removeClass' : 'addClass']('custom');
}
/**
 * Sets field value
 *
 * value must be of type:
 * o undefined (omitted) - restore default value (form default, not PMA default)
 * o String - if field_type is 'text'
 * o boolean - if field_type is 'checkbox'
 * o Array of values - if field_type is 'select'
 *
 * @param {Element} field
 * @param {String}  fieldType  see {@link #getFieldType}
 * @param {String|Boolean}  value
 */


function setFieldValue(field, fieldType, value) {
  var $field = $(field);

  switch (fieldType) {
    case 'text':
    case 'number':
      $field.val(value);
      break;

    case 'checkbox':
      $field.prop('checked', value);
      break;

    case 'select':
      var options = $field.prop('options');
      var i;
      var imax = options.length;

      for (i = 0; i < imax; i++) {
        options[i].selected = value.indexOf(options[i].value) !== -1;
      }

      break;
  }

  markField($field);
}
/**
 * Gets field value
 *
 * Will return one of:
 * o String - if type is 'text'
 * o boolean - if type is 'checkbox'
 * o Array of values - if type is 'select'
 *
 * @param {Element} field
 * @param {String}  fieldType returned by {@link #getFieldType}
 * @type Boolean|String|String[]
 */


function getFieldValue(field, fieldType) {
  var $field = $(field);

  switch (fieldType) {
    case 'text':
    case 'number':
      return $field.prop('value');

    case 'checkbox':
      return $field.prop('checked');

    case 'select':
      var options = $field.prop('options');
      var i;
      var imax = options.length;
      var items = [];

      for (i = 0; i < imax; i++) {
        if (options[i].selected) {
          items.push(options[i].value);
        }
      }

      return items;
  }

  return null;
}
/**
 * Returns values for all fields in fieldsets
 */
// eslint-disable-next-line no-unused-vars


function getAllValues() {
  var $elements = $('fieldset input, fieldset select, fieldset textarea');
  var values = {};
  var type;
  var value;

  for (var i = 0; i < $elements.length; i++) {
    type = getFieldType($elements[i]);
    value = getFieldValue($elements[i], type);

    if (typeof value !== 'undefined') {
      // we only have single selects, fatten array
      if (type === 'select') {
        value = value[0];
      }

      values[$elements[i].name] = value;
    }
  }

  return values;
}
/**
 * Checks whether field has its default value
 *
 * @param {Element} field
 * @param {String}  type
 * @return boolean
 */


function checkFieldDefault(field, type) {
  var $field = $(field);
  var fieldId = $field.attr('id');

  if (typeof defaultValues[fieldId] === 'undefined') {
    return true;
  }

  var isDefault = true;
  var currentValue = getFieldValue($field, type);

  if (type !== 'select') {
    isDefault = currentValue === defaultValues[fieldId];
  } else {
    // compare arrays, will work for our representation of select values
    if (currentValue.length !== defaultValues[fieldId].length) {
      isDefault = false;
    } else {
      for (var i = 0; i < currentValue.length; i++) {
        if (currentValue[i] !== defaultValues[fieldId][i]) {
          isDefault = false;
          break;
        }
      }
    }
  }

  return isDefault;
}
/**
 * Returns element's id prefix
 * @param {Element} element
 */
// eslint-disable-next-line no-unused-vars


function getIdPrefix(element) {
  return $(element).attr('id').replace(/[^-]+$/, '');
} // ------------------------------------------------------------------
// Form validation and field operations
//
// form validator assignments


var validate = {}; // form validator list

var validators = {
  // regexp: numeric value
  regExpNumeric: /^[0-9]+$/,
  // regexp: extract parts from PCRE expression
  regExpPcreExtract: /(.)(.*)\1(.*)?/,

  /**
   * Validates positive number
   *
   * @param {boolean} isKeyUp
   */
  validatePositiveNumber: function validatePositiveNumber(isKeyUp) {
    if (isKeyUp && this.value === '') {
      return true;
    }

    var result = this.value !== '0' && validators.regExpNumeric.test(this.value);
    return result ? true : Messages.error_nan_p;
  },

  /**
   * Validates non-negative number
   *
   * @param {boolean} isKeyUp
   */
  validateNonNegativeNumber: function validateNonNegativeNumber(isKeyUp) {
    if (isKeyUp && this.value === '') {
      return true;
    }

    var result = validators.regExpNumeric.test(this.value);
    return result ? true : Messages.error_nan_nneg;
  },

  /**
   * Validates port number
   */
  validatePortNumber: function validatePortNumber() {
    if (this.value === '') {
      return true;
    }

    var result = validators.regExpNumeric.test(this.value) && this.value !== '0';
    return result && this.value <= 65535 ? true : Messages.error_incorrect_port;
  },

  /**
   * Validates value according to given regular expression
   *
   * @param {boolean} isKeyUp
   * @param {string}  regexp
   */
  validateByRegex: function validateByRegex(isKeyUp, regexp) {
    if (isKeyUp && this.value === '') {
      return true;
    } // convert PCRE regexp


    var parts = regexp.match(validators.regExpPcreExtract);
    var valid = this.value.match(new RegExp(parts[2], parts[3])) !== null;
    return valid ? true : Messages.error_invalid_value;
  },

  /**
   * Validates upper bound for numeric inputs
   *
   * @param {boolean} isKeyUp
   * @param {int} maxValue
   */
  validateUpperBound: function validateUpperBound(isKeyUp, maxValue) {
    var val = parseInt(this.value, 10);

    if (isNaN(val)) {
      return true;
    }

    return val <= maxValue ? true : Functions.sprintf(Messages.error_value_lte, maxValue);
  },
  // field validators
  field: {},
  // fieldset validators
  fieldset: {}
};
/**
 * Registers validator for given field
 *
 * @param {String}  id       field id
 * @param {String}  type     validator (key in validators object)
 * @param {boolean} onKeyUp  whether fire on key up
 * @param {Array}   params   validation function parameters
 */
// eslint-disable-next-line no-unused-vars

function registerFieldValidator(id, type, onKeyUp, params) {
  if (typeof validators[type] === 'undefined') {
    return;
  }

  if (typeof validate[id] === 'undefined') {
    validate[id] = [];
  }

  if (validate[id].length === 0) {
    validate[id].push([type, params, onKeyUp]);
  }
}
/**
 * Returns validation functions associated with form field
 *
 * @param {String}  fieldId     form field id
 * @param {boolean} onKeyUpOnly  see registerFieldValidator
 * @type Array
 * @return array of [function, parameters to be passed to function]
 */


function getFieldValidators(fieldId, onKeyUpOnly) {
  // look for field bound validator
  var name = fieldId && fieldId.match(/[^-]+$/)[0];

  if (typeof validators.field[name] !== 'undefined') {
    return [[validators.field[name], null]];
  } // look for registered validators


  var functions = [];

  if (typeof validate[fieldId] !== 'undefined') {
    // validate[field_id]: array of [type, params, onKeyUp]
    for (var i = 0, imax = validate[fieldId].length; i < imax; i++) {
      if (onKeyUpOnly && !validate[fieldId][i][2]) {
        continue;
      }

      functions.push([validators[validate[fieldId][i][0]], validate[fieldId][i][1]]);
    }
  }

  return functions;
}
/**
 * Displays errors for given form fields
 *
 * WARNING: created DOM elements must be identical with the ones made by
 * PhpMyAdmin\Config\FormDisplayTemplate::displayInput()!
 *
 * @param {Object} errorList list of errors in the form {field id: error array}
 */


function displayErrors(errorList) {
  var tempIsEmpty = function tempIsEmpty(item) {
    return item !== '';
  };

  for (var fieldId in errorList) {
    var errors = errorList[fieldId];
    var $field = $('#' + fieldId);
    var isFieldset = $field.attr('tagName') === 'FIELDSET';
    var $errorCnt;

    if (isFieldset) {
      $errorCnt = $field.find('dl.errors');
    } else {
      $errorCnt = $field.siblings('.inline_errors');
    } // remove empty errors (used to clear error list)


    errors = $.grep(errors, tempIsEmpty); // CSS error class

    if (!isFieldset) {
      // checkboxes uses parent <span> for marking
      var $fieldMarker = $field.attr('type') === 'checkbox' ? $field.parent() : $field;
      $fieldMarker[errors.length ? 'addClass' : 'removeClass']('field-error');
    }

    if (errors.length) {
      // if error container doesn't exist, create it
      if ($errorCnt.length === 0) {
        if (isFieldset) {
          $errorCnt = $('<dl class="errors"></dl>');
          $field.find('table').before($errorCnt);
        } else {
          $errorCnt = $('<dl class="inline_errors"></dl>');
          $field.closest('td').append($errorCnt);
        }
      }

      var html = '';

      for (var i = 0, imax = errors.length; i < imax; i++) {
        html += '<dd>' + errors[i] + '</dd>';
      }

      $errorCnt.html(html);
    } else if ($errorCnt !== null) {
      // remove useless error container
      $errorCnt.remove();
    }
  }
}
/**
 * Validates fields and fieldsets and call displayError function as required
 */


function setDisplayError() {
  var elements = $('.optbox input[id], .optbox select[id], .optbox textarea[id]'); // run all field validators

  var errors = {};

  for (var i = 0; i < elements.length; i++) {
    validateField(elements[i], false, errors);
  } // run all fieldset validators


  $('fieldset.optbox').each(function () {
    validateFieldset(this, false, errors);
  });
  displayErrors(errors);
}
/**
 * Validates fieldset and puts errors in 'errors' object
 *
 * @param {Element} fieldset
 * @param {boolean} isKeyUp
 * @param {Object}  errors
 */


function validateFieldset(fieldset, isKeyUp, errors) {
  var $fieldset = $(fieldset);

  if ($fieldset.length && typeof validators.fieldset[$fieldset.attr('id')] !== 'undefined') {
    var fieldsetErrors = validators.fieldset[$fieldset.attr('id')].apply($fieldset[0], [isKeyUp]);

    for (var fieldId in fieldsetErrors) {
      if (typeof errors[fieldId] === 'undefined') {
        errors[fieldId] = [];
      }

      if (typeof fieldsetErrors[fieldId] === 'string') {
        fieldsetErrors[fieldId] = [fieldsetErrors[fieldId]];
      }

      $.merge(errors[fieldId], fieldsetErrors[fieldId]);
    }
  }
}
/**
 * Validates form field and puts errors in 'errors' object
 *
 * @param {Element} field
 * @param {boolean} isKeyUp
 * @param {Object}  errors
 */


function validateField(field, isKeyUp, errors) {
  var args;
  var result;
  var $field = $(field);
  var fieldId = $field.attr('id');
  errors[fieldId] = [];
  var functions = getFieldValidators(fieldId, isKeyUp);

  for (var i = 0; i < functions.length; i++) {
    if (typeof functions[i][1] !== 'undefined' && functions[i][1] !== null) {
      args = functions[i][1].slice(0);
    } else {
      args = [];
    }

    args.unshift(isKeyUp);
    result = functions[i][0].apply($field[0], args);

    if (result !== true) {
      if (typeof result === 'string') {
        result = [result];
      }

      $.merge(errors[fieldId], result);
    }
  }
}
/**
 * Validates form field and parent fieldset
 *
 * @param {Element} field
 * @param {boolean} isKeyUp
 */


function validateFieldAndFieldset(field, isKeyUp) {
  var $field = $(field);
  var errors = {};
  validateField($field, isKeyUp, errors);
  validateFieldset($field.closest('fieldset.optbox'), isKeyUp, errors);
  displayErrors(errors);
}

function loadInlineConfig() {
  if (!Array.isArray(configInlineParams)) {
    return;
  }

  for (var i = 0; i < configInlineParams.length; ++i) {
    if (typeof configInlineParams[i] === 'function') {
      configInlineParams[i]();
    }
  }
}

function setupValidation() {
  validate = {};
  configScriptLoaded = true;

  if (configScriptLoaded && typeof configInlineParams !== 'undefined') {
    loadInlineConfig();
  } // register validators and mark custom values


  var $elements = $('.optbox input[id], .optbox select[id], .optbox textarea[id]');
  $elements.each(function () {
    markField(this);
    var $el = $(this);
    $el.on('change', function () {
      validateFieldAndFieldset(this, false);
      markField(this);
    });
    var tagName = $el.attr('tagName'); // text fields can be validated after each change

    if (tagName === 'INPUT' && $el.attr('type') === 'text') {
      $el.on('keyup', function () {
        validateFieldAndFieldset($el, true);
        markField($el);
      });
    } // disable textarea spellcheck


    if (tagName === 'TEXTAREA') {
      $el.attr('spellcheck', false);
    }
  }); // check whether we've refreshed a page and browser remembered modified
  // form values

  var $checkPageRefresh = $('#check_page_refresh');

  if ($checkPageRefresh.length === 0 || $checkPageRefresh.val() === '1') {
    // run all field validators
    var errors = {};

    for (var i = 0; i < $elements.length; i++) {
      validateField($elements[i], false, errors);
    } // run all fieldset validators


    $('fieldset.optbox').each(function () {
      validateFieldset(this, false, errors);
    });
    displayErrors(errors);
  } else if ($checkPageRefresh) {
    $checkPageRefresh.val('1');
  }
}

AJAX.registerOnload('config.js', function () {
  setupValidation();
}); //
// END: Form validation and field operations
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// Tabbed forms
//

/**
 * Sets active tab
 *
 * @param {String} tabId
 */

function setTab(tabId) {
  $('ul.tabs').each(function () {
    var $this = $(this);

    if (!$this.find('li a[href="#' + tabId + '"]').length) {
      return;
    }

    $this.find('li').removeClass('active').find('a[href="#' + tabId + '"]').parent().addClass('active');
    $this.parent().find('div.tabs_contents fieldset').hide().filter('#' + tabId).show();
    var hashValue = 'tab_' + tabId;
    location.hash = hashValue;
    $this.parent().find('input[name=tab_hash]').val(hashValue);
  });
}

function setupConfigTabs() {
  var forms = $('form.config-form');
  forms.each(function () {
    var $this = $(this);
    var $tabs = $this.find('ul.tabs');

    if (!$tabs.length) {
      return;
    } // add tabs events and activate one tab (the first one or indicated by location hash)


    $tabs.find('li').removeClass('active');
    $tabs.find('a').on('click', function (e) {
      e.preventDefault();
      setTab($(this).attr('href').substr(1));
    }).first().parent().addClass('active');
    $this.find('div.tabs_contents fieldset').hide().first().show();
  });
}

function adjustPrefsNotification() {
  var $prefsAutoLoad = $('#prefs_autoload');
  var $tableNameControl = $('#table_name_col_no');
  var $prefsAutoShowing = $prefsAutoLoad.css('display') !== 'none';

  if ($prefsAutoShowing && $tableNameControl.length) {
    $tableNameControl.css('top', '55px');
  }
}

AJAX.registerOnload('config.js', function () {
  setupConfigTabs();
  adjustPrefsNotification(); // tab links handling
  // (works with history in FF, further browser support here would be an overkill)

  window.onhashchange = function () {
    if (location.hash.match(/^#tab_[a-zA-Z0-9_]+$/)) {
      // session ID is sometimes appended here
      var hash = location.hash.substr(5).split('&')[0];

      if ($('#' + hash).length) {
        setTab(hash);
      }
    }
  };

  window.onhashchange();
}); //
// END: Tabbed forms
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// Form reset buttons
//

AJAX.registerOnload('config.js', function () {
  $('.optbox input[type=button][name=submit_reset]').on('click', function () {
    var fields = $(this).closest('fieldset').find('input, select, textarea');

    for (var i = 0, imax = fields.length; i < imax; i++) {
      setFieldValue(fields[i], getFieldType(fields[i]), defaultValues[fields[i].id]);
    }

    setDisplayError();
  });
}); //
// END: Form reset buttons
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// "Restore default" and "set value" buttons
//

/**
 * Restores field's default value
 *
 * @param {String} fieldId
 */

function restoreField(fieldId) {
  var $field = $('#' + fieldId);

  if ($field.length === 0 || defaultValues[fieldId] === undefined) {
    return;
  }

  setFieldValue($field, getFieldType($field), defaultValues[fieldId]);
}

function setupRestoreField() {
  $('div.tabs_contents').on('mouseenter', '.restore-default, .set-value', function () {
    $(this).css('opacity', 1);
  }).on('mouseleave', '.restore-default, .set-value', function () {
    $(this).css('opacity', 0.25);
  }).on('click', '.restore-default, .set-value', function (e) {
    e.preventDefault();
    var href = $(this).attr('href');
    var fieldSel;

    if ($(this).hasClass('restore-default')) {
      fieldSel = href;
      restoreField(fieldSel.substr(1));
    } else {
      fieldSel = href.match(/^[^=]+/)[0];
      var value = href.match(/=(.+)$/)[1];
      setFieldValue($(fieldSel), 'text', value);
    }

    $(fieldSel).trigger('change');
  }).find('.restore-default, .set-value') // inline-block for IE so opacity inheritance works
  .css({
    display: 'inline-block',
    opacity: 0.25
  });
}

AJAX.registerOnload('config.js', function () {
  setupRestoreField();
}); //
// END: "Restore default" and "set value" buttons
// ------------------------------------------------------------------
// ------------------------------------------------------------------
// User preferences import/export
//

AJAX.registerOnload('config.js', function () {
  offerPrefsAutoimport();
  var $radios = $('#import_local_storage, #export_local_storage');

  if (!$radios.length) {
    return;
  } // enable JavaScript dependent fields


  $radios.prop('disabled', false).add('#export_text_file, #import_text_file').on('click', function () {
    var enableId = $(this).attr('id');
    var disableId;

    if (enableId.match(/local_storage$/)) {
      disableId = enableId.replace(/local_storage$/, 'text_file');
    } else {
      disableId = enableId.replace(/text_file$/, 'local_storage');
    }

    $('#opts_' + disableId).addClass('disabled').find('input').prop('disabled', true);
    $('#opts_' + enableId).removeClass('disabled').find('input').prop('disabled', false);
  }); // detect localStorage state

  var lsSupported = isStorageSupported('localStorage', true);
  var lsExists = lsSupported ? window.localStorage.config || false : false;
  $('div.localStorage-' + (lsSupported ? 'un' : '') + 'supported').hide();
  $('div.localStorage-' + (lsExists ? 'empty' : 'exists')).hide();

  if (lsExists) {
    updatePrefsDate();
  }

  $('form.prefs-form').on('change', function () {
    var $form = $(this);
    var disabled = false;

    if (!lsSupported) {
      disabled = $form.find('input[type=radio][value$=local_storage]').prop('checked');
    } else if (!lsExists && $form.attr('name') === 'prefs_import' && $('#import_local_storage')[0].checked) {
      disabled = true;
    }

    $form.find('input[type=submit]').prop('disabled', disabled);
  }).on('submit', function (e) {
    var $form = $(this);

    if ($form.attr('name') === 'prefs_export' && $('#export_local_storage')[0].checked) {
      e.preventDefault(); // use AJAX to read JSON settings and save them

      savePrefsToLocalStorage($form);
    } else if ($form.attr('name') === 'prefs_import' && $('#import_local_storage')[0].checked) {
      // set 'json' input and submit form
      $form.find('input[name=json]').val(window.localStorage.config);
    }
  });
  $(document).on('click', 'div.click-hide-message', function () {
    $(this).hide().parent('.card-body').css('height', '').next('form').show();
  });
});
/**
 * Saves user preferences to localStorage
 *
 * @param {Element} form
 */

function savePrefsToLocalStorage(form) {
  var $form = $(form);
  var submit = $form.find('input[type=submit]');
  submit.prop('disabled', true);
  $.ajax({
    url: 'index.php?route=/preferences/manage',
    cache: false,
    type: 'POST',
    data: {
      'ajax_request': true,
      'server': CommonParams.get('server'),
      'submit_get_json': true
    },
    success: function success(data) {
      if (typeof data !== 'undefined' && data.success === true) {
        window.localStorage.config = data.prefs;
        window.localStorage.configMtime = data.mtime;
        window.localStorage.configMtimeLocal = new Date().toUTCString();
        updatePrefsDate();
        $('div.localStorage-empty').hide();
        $('div.localStorage-exists').show();
        var group = $form.parent('.card-body');
        group.css('height', group.height() + 'px');
        $form.hide('fast');
        $form.prev('.click-hide-message').show('fast');
      } else {
        Functions.ajaxShowMessage(data.error);
      }
    },
    complete: function complete() {
      submit.prop('disabled', false);
    }
  });
}
/**
 * Updates preferences timestamp in Import form
 */


function updatePrefsDate() {
  var d = new Date(window.localStorage.configMtimeLocal);
  var msg = Messages.strSavedOn.replace('@DATE@', Functions.formatDateTime(d));
  $('#opts_import_local_storage').find('div.localStorage-exists').html(msg);
}
/**
 * Prepares message which informs that localStorage preferences are available and can be imported or deleted
 */


function offerPrefsAutoimport() {
  var hasConfig = isStorageSupported('localStorage') && (window.localStorage.config || false);
  var $cnt = $('#prefs_autoload');

  if (!$cnt.length || !hasConfig) {
    return;
  }

  $cnt.find('a').on('click', function (e) {
    e.preventDefault();
    var $a = $(this);

    if ($a.attr('href') === '#no') {
      $cnt.remove();
      $.post('index.php', {
        'server': CommonParams.get('server'),
        'prefs_autoload': 'hide'
      }, null, 'html');
      return;
    } else if ($a.attr('href') === '#delete') {
      $cnt.remove();
      localStorage.clear();
      $.post('index.php', {
        'server': CommonParams.get('server'),
        'prefs_autoload': 'hide'
      }, null, 'html');
      return;
    }

    $cnt.find('input[name=json]').val(window.localStorage.config);
    $cnt.find('form').trigger('submit');
  });
  $cnt.show();
}  5   http://localhost/phpmyadmin/js/dist/config.js?v=5.1.1          :lZ      configInlineParams     P-%      configScriptLoaded     x      isStorageSupported     M      warn   2      window     +      setItem    %      PMATest          getItem    D
      removeItem	     tuW      error
      m3?	      Functions      AN      ajaxShowMessage          Messages   D      strNoLocalStorage      $      AJAX   }.      registerTeardown   m	      config.js      z;      .optbox input[id], .optbox select[id], .optbox textarea[id]          change     KH`      keyup      -      .optbox input[type=button][name=submit_reset]      X      click      5,      div.tabs_contents      e,      #import_local_storage, #export_local_storage   -      form.prefs-form    d      submit     O      document   <      div.click-hide-message           #prefs_autoload          registerOnload     
z      $topmenuUpt     0
      #user_prefs_tabs!         a.active"   A      attr#         rel$          samepage%         a:not(.active)&     W      newpage'          defaultValues(            getFieldType)   !      field*             $field+           tagName,    P      prop-   {      INPUT.      '
      SELECT/     1<      select0     ;      TEXTAREA1   3      text2   A      setRestoreDefaultBtn3   e}      display4          $el5    /      closest6    U_%      .restore-default img7   HK      show8   v}      hide9   *	      markField:      7d	      isDefault;      (
      checkFieldDefault<      0      $fieldMarker=   y*      checkbox>   2      parent?     +      removeClass@    B|      addClassA   o2      customB           setFieldValueC      f:#	      fieldTypeD      &      valE    :0      checkedF     :y      optionsG    u      imaxH   .      selectedJ   p\      getFieldValueK      #`      itemsL      u2      pushM         getAllValuesN   yj%	      $elementsP      4\      fieldIdQ          currentValueR   }      getIdPrefixS    S      validateT   R
      validatorsU     {h      regExpNumericV      k       ^[0-9]+$W   T\'      regExpPcreExtractX      $k      (.)(.*)\1(.*)?Y           validatePositiveNumber\     16      validateNonNegativeNumber^      @K      validatePortNumber`     4      validateByRegexe    z      validateUpperBoundi     W      fieldsetj   u      registerFieldValidatork     T      onKeyUpl    &<      paramsm     5      getFieldValidatorsp     B|@      displayErrorsr      /FI      tempIsEmpty    mX%o      setDisplayError    K      validateField      G5      fieldset.optbox    Y,      validateFieldset   3      validateFieldAndFieldset   :      loadInlineConfig   ]      isArray          setupValidation    `G
      spellcheck     &      $checkPageRefresh      [      #check_page_refresh          setTab     An6      tabId      1u      ul.tabs    K      $this      Px      active           div.tabs_contents fieldset     0+QA      location   yn      hash   q      setupConfigTabs    y      forms            form.config-form   K      $tabs      6f      substr     `~      first      iH      adjustPrefsNotification    F      $prefsAutoLoad           $tableNameControl      HK      #table_name_col_no     di      $prefsAutoShowing      >      css    ,      none   $      top    ?      55px   <      onhashchange         restoreField   /      setupRestoreField      F
      mouseenter     3.,k      .restore-default, .set-value   ue      opacity    fN
      mouseleave     U      inline-block   
0|_      offerPrefsAutoimport         $radios    zw      disabled   $      #export_text_file, #import_text_file   ;      lsSupported    @;      localStorage   ;      lsExists   ~4      config     bx      div.localStorage-       	      supported            empty      Q      exists     7      updatePrefsDate    l      $form      7t      savePrefsToLocalStorage    \9      success    D      complete   rw	      hasConfig      x      $cnt  y      setupValidation/<           setupValidation/</<   Eq      window.onhashchange   -a      setupConfigTabs/<     }      setupConfigTabs/</<	   6      ^#tab_[a-zA-Z0-9_]+$
  r      setupRestoreField/<   
      offerPrefsAutoimport/<    <   [     <             %,                                                                                                                                                                                                                
                                                      '                  #                 $                  &                 (                  )                  0                  ,                 1                 :      Oc         ;  j        M        R  (  J    B    2  T         '  p      9      S    m                              	                                                N    y  `i                i                  k  l                4  P+  c               )  *    :  <              )  *  +              )    *  P  :  Q  i              )  C  *  F  i  G  K              )  3  4                                                    c                                                                                                         P  P                  P0V      X      	     I$KE                   	   -    U  W  Y  \  ^  `  e  )  i                                          
     3    &   1                        .           y   q     y      m       F                F      m F      m F	   
   f   q    y      m       /         F   F                           y                              %   %m F   q     y                              %m F   q        !      y   q  #      y      m F	      f   m F	      f   q    y      m F	   
      f   q 0 `P> `P/PH `P0 `PA:F	 `P P/P ,PD `P P9 `P0 `P P*@P4 `P P*8PD `P? `P@  `P/P PJ+*PD7 `P/P PD:P                                        F      m                       F   J   	         G               Gq        .'      0 `P P= `PA
F  `P&fP0 `P0 `P,PI 1`P@
P            +   _   '   |   |   =                  	           y   q     y   q     f   I      F   q  0 `P> `PN `P@ `P,P4P  
       F         	       !         y     m       F      m        G      	   	        y       m       #             G          F        GF           s               F   O          G     G  G                .'  !     0 `P-P8 `P PH `P0 `PAF `P6 `P PH `P0 `P0@ `P0 `P00  `P&fP0 `P0 
`P6 
`PJ /`P@ `P4Q                c   ,                                      y      m F         f   m F         f   m F   	      f
   m F      m F   5      8   
      ?8   q 0 `P/P PJ/PJ/PJ%P:5 : N PDP    $   p  p                               y     m       F      m     F               F      m F      q   F      m F	   
   f   m F   m  F   m  F      q    F      m F   m  F   m  F   q  6 `P.P8 `P PH `P0 `PA F	 `P P/P4 `P P 
PJ P*P/	P4 `P P*#P*P*P4 P             e                 	          y     m F      m F      m                             Gq  0 `P-P/P/P8 `P P4P    `  `                               y     q    y     m       F      f   q    F      m          %   
      F   	   m 
      $         F      f   q                    F      q    6 `P.	P4 `P.P9 `P PD `P PH	 `P P0 `P PI `P0 `P PI P    )   \   \   (                             y      m F      f   q 0 `P/P 2PD
P    0   8   8                                y   q  0 `P>P &                                     y      m       y      m      F      m                F   	   #   
     F      	   q    0 `P/P8 `P/P8 `P PN `P0 `P PIP                                   y     m       F      m        #         F      m H              
      $   
     	         
         0 `P-P8 `P PH `P0 `P PCK `P0 `PEK `P0 `PEF `P5Q                                         G                  G      
        a    K        GF   ;           GF   a    b     b    b   q    0 `P0 `PAF `P0 `P@	 `P0 `P (((PIP :   $  $                              y      m &         F   F                  y      m       F                            F   	   m F
      f   q    F   q  0 `P/P0 `P/PI `P 0 `PA!F `P P 
PD  `P,P4P      D  $                         $     GF         q      GF      m    %   
        GF      q    F              %         F	   
   F   q       01 `P PD `P P@ `P P4 `PA@	 K `P= `P 
PO `P1Q    D  4     t   9              k   #   d   d   ,                            y      m       F   f   q 0 `P/P8 `P PDP      `  P                  ,          5                           
            y   q        y      m       F	   f
   q    y      m     F           F   m              5                F   9         y        G   q   .'  #      y      m F	   f   q    y      q ,   )        *     F      q ,   0 `P0 `PL `P 0 `P@	 `P/P8 `P 
PD! `P/PH# `P 4P@% `PK' 	 `P&fP0 `P PD' *`P@, `P/P/PD/ `P/P> `P> `P PI3P  `            M      ,  ,                             y     m       y      m      y        m                 F   m     
      
        y        q                          G	   q 0 `P-P8 `P.P8 `P PH `P P0 `P.%P4 `P 4P4P (                                     F   F   e   m n         F   F   m F      m G      y   	      %m F
            y      q    0 `P PM `P P/
PJ 
`P P0 `P.PI	 P        8   8                                y   q  0 `P>P          h                 
           y      m       F      m F         q    F      m F      	   q 0 `P/P8 `P P P4 `P P P4P          E         	                y     m        B         1         9         A               F      m       F      m 
      F   	   m     F
     a               V          GF   '        F       GF   q      .'          0 `P-PH 
`P000 `P PCF0 `P PCF0 `P P80 `P> `PJ `P&fP0 `P0 
`P PI `P@ `PDF `P1Q              e           F                )              F      f   q    F      f    q !   5"   !   #   5$   #   %   5&   e'   8(   e)   8*   f+   8,   f-   8.   f/   80   f1   82   f3   84   55   86   57   88   %      F      f9   q    F      f:   q    F      f;   q    F      f<   q    F      f=   q E0@&`P PD/`P PD5%`PK %`P;0%`P50 :0 J  J & J 2 J A J R J \ :0 @ {`P PD `P PD `P PD `P PD `P PD  P   3  p  p    y     p  p        4    p  p                y   "  p  %  p$  p(  p*  p-  p.  p/  p2  p3  p4  p5  p            7  p8  p    ;  p         `  p  p  p  p  p  p	  p
  p  p  p  p  p  p  p  p  p  p  p!  p#  p&  p+  p,  p6  p9  p:  p        p    p'     @S    @T    @   PU    PW    pY    p\    p^    p`    pe    @)    @i     p'  p)  p0  p1  p  `              `
          `$        !  "  #  $  %  &    `    `S    @         $    i     p     D  1    @      pp    `              `T    S     L    `9  $       p"  +  -    1      p0    	  `$  (  ;  =  >  2  ?  @  A  
  `$  ,  +  -  "    .  /  0  1  m     `$  "   '    J  /       `$  1    =  /  ,    E  F     H  L    `$  5  M    6  7  8    `      (  p    `$    i   $  p  `$          R ?    a     %  p  >  @    8  7    `$        3             `    E    P  J  &  $  #         `$       *  p  `    `$         -  p  .  p  /  p       @  3      `  $       ,            2  p           m     8            3  p  4  p    5  p  `        $          a     ;  p7  X(   >              f                             `	 r   
                  (              2           
   9                B     ` 	       J                M     ` 	    	   ;                R     ` 	         Y     `	         \     `	         ^     `	         `     `	         e     `	       j                m     ` 	        p     ` 	         r                   ` 	                                ` 	              ` 	              ` 	               ~                                     `	            `	            `	 |                          ` 	                                                        `	    
                                                                 `	              ` 	                      
   `	         
   `	         
   `	               -                             `	               `	               `	               `	 !           ` 	                                              ` 	 M                        `	 H      |a      |a                   ?    $                   p    g    '   ,             @    7    0   *             p    [    =                       S               	  j
    j
  ^                       v               ,  #    #                                                                j    V                   h  u  h    9                   '  ?                   3  1                    B  +             X   p  X   S  1            !  "  !  "  k              $  &  $  &                '  z-  '  z-                (  +(  '  +(    (           -  j/  -  j/                /  M/  /  M/    %             0  f2  0  f2                3  5   3  5                6  6  5  6  3  !            7  7  6  7  ;              7  =  7  =  G              /9  Q;  &9  Q;  Q              ~9  9  u9  9  T               :  :  }:  :  [              =  L=  =  L=  s  '             =  =  =  =  |  *            ?  @  ?  @               9?  @  0?  @                 A  5C  @  5C                PA  1C  GA  1C                pB  B  gB  B    )            WC  gD  7C  gD                  D  _F  D  _F    *             UE  BF  LE  BF    !             JG  H  AG  H    *            G  H  G  H    J             I  J  I  J                J  N  J  N                K  FK  K  FK    S            K  K  yK  K    ?            K  gM  K  gM    :            -N  JN  $N  JN    *            ^O  W  UO  W    *            uP  /R  lP  /R    c            S  =U  S  =U  6  -            UU  W  LU  W  A             ZW  W  QW  W  M  =            'X  Y\  X  Y\  W               Y   \  ~Y   \  d              !\  Q\  \  Q\  t               \  ]  \  ]  ~              ^  |a  ^  |a                _  ia  ^  ia    &          56      
a5$>a5$>Cc4a>P   \    O^partitionKey=%28http%2Clocalhost%29,:http://localhost/phpmyadmin/js/dist/config.js?v=5.1.1 necko:classified 1 strongly-framed 1 request-method GET response-head HTTP/1.1 200 OK
ETag: "617c-5c3e8f30b8240"
Content-Length: 24956
Content-Type: application/x-javascript
Date: Sun, 05 Sep 2021 19:11:42 GMT
Server: Apache/2.4.48 (Unix) OpenSSL/1.1.1k PHP/8.0.10 mod_perl/2.0.11 Perl/v5.32.1
Last-Modified: Fri, 04 Jun 2021 04:16:01 GMT
Accept-Ranges: bytes
 original-response-headers Date: Sat, 04 Sep 2021 15:19:40 GMT
Server: Apache/2.4.48 (Unix) OpenSSL/1.1.1k PHP/8.0.10 mod_perl/2.0.11 Perl/v5.32.1
Last-Modified: Fri, 04 Jun 2021 04:16:01 GMT
ETag: "617c-5c3e8f30b8240"
Accept-Ranges: bytes
Content-Length: 24956
Keep-Alive: timeout=5, max=94
Connection: Keep-Alive
Content-Type: application/x-javascript
 ctid 2 uncompressed-len 0 net-response-time-onstart 45 net-response-time-onstop 46 alt-data 1;24956,javascript/moz-bytecode-20210823123856-8l0 alt-data-from-child 1  	<